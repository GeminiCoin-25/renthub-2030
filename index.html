<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RentHub - Ø£Ø¤Ø¬Ø± Ø£ÙŠ Ø´ÙŠØ¡</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background-color: #f8f9fa; color: #333; line-height: 1.6; }
        .navbar { background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); position: sticky; top: 0; z-index: 1000; }
        .logo h1 { font-size: 1.8rem; }
        .logo h1 i { margin-left: 10px; }
        .search-bar { display: flex; flex-grow: 0.5; }
        .search-bar input { padding: 0.8rem 1rem; border: none; border-radius: 30px 0 0 30px; width: 100%; font-size: 1rem; }
        .search-bar button { padding: 0.8rem 1.5rem; background-color: #ff7e30; color: white; border: none; border-radius: 0 30px 30px 0; cursor: pointer; font-weight: bold; }
        .nav-buttons { display: flex; gap: 1rem; align-items: center; }
        .btn-auth, .btn-publish { padding: 0.7rem 1.2rem; border: none; border-radius: 30px; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 8px; }
        .btn-auth { background-color: #3498db; color: white; }
        .btn-publish { background-color: #2ecc71; color: white; }
        .auth-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2000; justify-content: center; align-items: center; }
        .auth-box { background: white; padding: 2.5rem; border-radius: 15px; width: 90%; max-width: 400px; text-align: center; }
        .auth-box h2 { color: #6a11cb; margin-bottom: 1.5rem; }
        .auth-box input { width: 100%; padding: 1rem; margin: 0.8rem 0; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; }
        .auth-buttons { display: flex; flex-direction: column; gap: 0.8rem; margin-top: 1.5rem; }
        .btn-login, .btn-signup { padding: 0.9rem; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        .btn-login { background: #6a11cb; color: white; }
        .btn-signup { background: #2ecc71; color: white; }
        .btn-cancel { background: #95a5a6; color: white; }
        .auth-message { margin-top: 1rem; padding: 0.8rem; border-radius: 5px; }
        .hero { text-align: center; padding: 4rem 2rem; background: linear-gradient(to right, #fdfcfb, #f5f7fa); }
        .hero h2 { font-size: 2.8rem; margin-bottom: 1rem; color: #2c3e50; }
        .highlight { color: #6a11cb; font-weight: bold; }
        .hero p { font-size: 1.2rem; color: #666; max-width: 700px; margin: 0 auto; }
        .categories, .live-ads { padding: 3rem 2rem; max-width: 1200px; margin: 0 auto; }
        .categories h2, .live-ads h2 { color: #2c3e50; margin-bottom: 2rem; font-size: 2rem; border-right: 5px solid #6a11cb; padding-right: 15px; }
        .categories-grid, .ads-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1.5rem; }
        .category-card, .ad-card { background-color: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); transition: all 0.3s ease; cursor: pointer; text-align: center; }
        .category-card:hover, .ad-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); }
        .category-icon { font-size: 2.5rem; margin-bottom: 1rem; }
        .category-card h3 { color: #2c3e50; margin-bottom: 0.5rem; }
        .category-card p, .ad-card p { color: #7f8c8d; }
        .ad-card h3 { color: #6a11cb; }
        .ad-price { color: #2ecc71 !important; font-size: 1.3rem; font-weight: bold; }
        .ad-category { display: inline-block; background-color: #e8f4fc; color: #2575fc; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.85rem; margin-top: 0.5rem; }
        footer { text-align: center; padding: 2rem; background-color: #2c3e50; color: #ecf0f1; margin-top: 3rem; }
        .user-logged-in { background: #2ecc71 !important; }
        .user-name { font-weight: bold; margin-right: 0.5rem; }
        .btn-reset { background: #9b59b6; color: white; padding: 0.8rem 1.5rem; border: none; border-radius: 30px; cursor: pointer; margin-top: 1rem; font-weight: bold; }
    </style>
</head>
<body>
    <header class="navbar">
        <div class="logo">
            <h1><i class="fas fa-handshake"></i> RentHub</h1>
        </div>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªØ¤Ø¬Ø±ØŸ">
            <button onclick="searchItems()"><i class="fas fa-search"></i> Ø¨Ø­Ø«</button>
        </div>
        <div class="nav-buttons">
            <button class="btn-auth" onclick="showAuthModal()" id="userAuthBtn">
                <i class="fas fa-user"></i> Ø¯Ø®ÙˆÙ„
            </button>
            <button class="btn-publish" onclick="showAdForm()" id="publishBtn">
                <i class="fas fa-plus-circle"></i> Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†
            </button>
        </div>
    </header>
    <div class="auth-modal" id="authModal">
        <div class="auth-box">
            <h2><i class="fas fa-user-circle"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h2>
            <input type="email" id="authEmail" placeholder="Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
            <input type="password" id="authPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)">
            <div class="auth-buttons">
                <button class="btn-login" onclick="loginUser()">
                    <i class="fas fa-sign-in-alt"></i> Ø¯Ø®ÙˆÙ„
                </button>
                <button class="btn-signup" onclick="signupUser()">
                    <i class="fas fa-user-plus"></i> Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
                </button>
                <button class="btn-cancel" onclick="hideAuthModal()">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
            <p id="authMessage" class="auth-message"></p>
        </div>
    </div>
    <main>
        <section class="hero">
            <h2>Ø£Ø¤Ø¬Ø± <span class="highlight">Ø£ÙŠ Ø´ÙŠØ¡</span>ØŒ ÙÙŠ <span class="highlight">Ø£ÙŠ ÙˆÙ‚Øª</span></h2>
            <p>Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø£ÙƒØ¨Ø± Ù…Ø¬ØªÙ…Ø¹ Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ù…Ù† Ø­ÙˆÙ„Ùƒ. ÙˆÙØ± Ø§Ù„Ù…Ø§Ù„ØŒ ÙƒØ³Ø¨ Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠØŒ ÙˆØ³Ø§Ù‡Ù… ÙÙŠ Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.</p>
        </section>
        <section class="categories">
            <h2><i class="fas fa-th-list"></i> Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h2>
            <div class="categories-grid" id="categoriesContainer"></div>
        </section>
        <section class="live-ads">
            <h2><i class="fas fa-bolt"></i> Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø­ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</h2>
            <div class="ads-grid" id="adsContainer"></div>
        </section>
    </main>
    <footer>
        <p>Â© 2024 RentHub. Ù‡Ø°Ø§ Ù…Ø´Ø±ÙˆØ¹ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±.</p>
    </footer>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDA223bKAr9kWXKLVBYMGZYrP0RGZEzrDM",
            authDomain: "renthub-2030.firebaseapp.com",
            projectId: "renthub-2030",
            storageBucket: "renthub-2030.firebasestorage.app",
            messagingSenderId: "23301901800",
            appId: "1:23301901800:web:2679c834aac406c72d685d"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        console.log("âœ… Firebase Ø¬Ø§Ù‡Ø²!");
        const categories = [
            { id: 1, name: "Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª ğŸ®", icon: "fas fa-gamepad", count: "7,530 Ø¥Ø¹Ù„Ø§Ù†", color: "#FF6B8B" },
            { id: 2, name: "Ø£Ø¯ÙˆØ§Øª ÙŠØ¯ÙˆÙŠØ© ğŸ”§", icon: "fas fa-tools", count: "8,320 Ø¥Ø¹Ù„Ø§Ù†", color: "#36D7B7" },
            { id: 3, name: "Ø±ÙŠØ§Ø¶Ø© ÙˆØªØ±ÙÙŠÙ‡ âš½", icon: "fas fa-futbol", count: "4,210 Ø¥Ø¹Ù„Ø§Ù†", color: "#FFCE56" },
            { id: 4, name: "Ø£Ø²ÙŠØ§Ø¡ ÙˆØ¹Ù…Ù„ ğŸ‘”", icon: "fas fa-tshirt", count: "15,240 Ø¥Ø¹Ù„Ø§Ù†", color: "#9B59B6" },
            { id: 5, name: "Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ…ÙˆØ§ØµÙ„Ø§Øª ğŸš—", icon: "fas fa-car", count: "12,450 Ø¥Ø¹Ù„Ø§Ù†", color: "#3498DB" },
            { id: 6, name: "Ù…Ù†Ø²Ù„ ÙˆØ­Ø¯ÙŠÙ‚Ø© ğŸ ", icon: "fas fa-home", count: "9,870 Ø¥Ø¹Ù„Ø§Ù†", color: "#E74C3C" }
        ];
        let ads = [];
        function displayCategories() {
            const container = document.getElementById('categoriesContainer');
            container.innerHTML = '';
            categories.forEach(cat => {
                const card = document.createElement('div');
                card.className = 'category-card';
                card.style.borderTop = `5px solid ${cat.color}`;
                card.innerHTML = `
                    <div class="category-icon">
                        <i class="${cat.icon}"></i>
                    </div>
                    <h3>${cat.name}</h3>
                    <p>${cat.count}</p>
                `;
                container.appendChild(card);
            });
        }
        function displayAds() {
            const container = document.getElementById('adsContainer');
            container.innerHTML = '';
            if (ads.length === 0) {
                container.innerHTML = '<p style="text-align:center; color:#666; grid-column:1/-1;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹. ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠÙ†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†!</p>';
                return;
            }
            ads.forEach(ad => {
                const card = document.createElement('div');
                card.className = 'ad-card';
                card.innerHTML = `
                    <h3>${ad.title}</h3>
                    <p>${ad.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                    <p class="ad-price">${ad.price} Ø±ÙŠØ§Ù„/Ø³Ø§Ø¹Ø©</p>
                    <span class="ad-category">${ad.category}</span>
                    <p style="margin-top:10px; color:#888; font-size:0.9rem;">
                        <i class="fas fa-user"></i> ${ad.userEmail || 'Ù…Ø³ØªØ®Ø¯Ù…'}
                    </p>
                `;
                container.appendChild(card);
            });
        }
        function showAuthModal() {
            document.getElementById('authModal').style.display = 'flex';
        }
        function hideAuthModal() {
            document.getElementById('authModal').style.display = 'none';
            document.getElementById('authMessage').textContent = '';
            document.getElementById('authEmail').value = '';
            document.getElementById('authPassword').value = '';
        }
        async function signupUser() {
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            const messageEl = document.getElementById('authMessage');
            if (!email || !password || password.length < 6) {
                messageEl.textContent = 'âš ï¸ Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ø§Ù‹ ØµØ­ÙŠØ­Ø§Ù‹ ÙˆÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± (6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)';
                messageEl.style.color = '#e74c3c';
                return;
            }
            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                messageEl.textContent = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!';
                messageEl.style.color = '#2ecc71';
                updateUI();
                setTimeout(() => {
                    hideAuthModal();
                    loadAdsFromFirebase();
                    alert('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ RentHub!');
                }, 1500);
            } catch (error) {
                messageEl.textContent = `âŒ Ø®Ø·Ø£: ${error.message}`;
                messageEl.style.color = '#e74c3c';
            }
        }
        async function loginUser() {
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            const messageEl = document.getElementById('authMessage');
            try {
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                messageEl.textContent = 'âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!';
                messageEl.style.color = '#2ecc71';
                updateUI();
                setTimeout(() => {
                    hideAuthModal();
                    loadAdsFromFirebase();
                }, 1500);
            } catch (error) {
                messageEl.textContent = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„: ${error.message}`;
                messageEl.style.color = '#e74c3c';
            }
        }
        function logoutUser() {
            auth.signOut().then(() => {
                updateUI();
                ads = [];
                displayAds();
                alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
            });
        }
        function updateUI() {
            const user = auth.currentUser;
            const authBtn = document.getElementById('userAuthBtn');
            const publishBtn = document.getElementById('publishBtn');
            if (user) {
                authBtn.innerHTML = `<i class="fas fa-user-check"></i> ${user.email.split('@')[0]}`;
                authBtn.className = 'btn-auth user-logged-in';
                authBtn.onclick = logoutUser;
                publishBtn.disabled = false;
                publishBtn.style.opacity = '1';
                publishBtn.title = 'Ø§Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ø§Ù„Ø¢Ù†';
            } else {
                authBtn.innerHTML = '<i class="fas fa-user"></i> Ø¯Ø®ÙˆÙ„';
                authBtn.className = 'btn-auth';
                authBtn.onclick = showAuthModal;
                publishBtn.disabled = true;
                publishBtn.style.opacity = '0.6';
                publishBtn.title = 'Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†';
            }
        }
        async function loadAdsFromFirebase() {
            try {
                const querySnapshot = await db.collection('ads').orderBy('createdAt', 'desc').limit(10).get();
                ads = [];
                querySnapshot.forEach((doc) => {
                    ads.push({ id: doc.id, ...doc.data() });
                });
                displayAds();
                console.log("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…Ù† Firebase");
            } catch (error) {
                console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª:", error);
            }
        }
        function showAdForm() {
            const user = auth.currentUser;
            if (!user) {
                showAuthModal();
                alert('â— Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†');
                return;
            }
            const title = prompt("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†:");
            if (!title) return;
            const price = prompt("Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø±ÙŠØ§Ù„ Ù„Ù„Ø³Ø§Ø¹Ø©:");
            if (!price) return;
            const category = prompt("Ø§Ù„ÙØ¦Ø© (Ø§ÙƒØªØ¨: Ø£Ø¯ÙˆØ§ØªØŒ Ø³ÙŠØ§Ø±Ø§ØªØŒ Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§ØªØŒ Ø¥Ù„Ø®):");
            db.collection('ads').add({
                title: title,
                price: parseInt(price),
                category: category || "Ø¹Ø§Ù…",
                description: "Ø¥Ø¹Ù„Ø§Ù† Ù…Ø¶Ø§ÙØ© Ø¹Ø¨Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹",
                userEmail: user.email,
                userId: user.uid,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                alert(`âœ… ØªÙ… Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†Ùƒ "${title}" Ø¨Ù†Ø¬Ø§Ø­!`);
                loadAdsFromFirebase();
            })
            .catch(error => {
                alert(`âŒ Ø®Ø·Ø£: ${error.message}`);
            });
        }
        function searchItems() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if (!query) return;
            const results = ads.filter(ad => 
                ad.title.toLowerCase().includes(query) || 
                (ad.description && ad.description.toLowerCase().includes(query))
            );
            if (results.length > 0) {
                const originalAds = [...ads];
                ads = results;
                displayAds();
                ads = originalAds;
            } else {
                alert(`ğŸ” Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ Ù„Ù€ "${query}"`);
            }
        }
        auth.onAuthStateChanged((user) => {
            updateUI();
            if (user) {
                loadAdsFromFirebase();
            }
        });
        window.onload = function() {
            displayCategories();
            displayAds();
            console.log("ğŸš€ RentHub Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„!");
        };
    </script>
</body>
</html>

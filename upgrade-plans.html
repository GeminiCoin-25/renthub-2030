<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mejorar Plan - RentHub 2030</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        header {
            background: white;
            padding: 20px 0;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            border-bottom: 3px solid #4f46e5;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        .logo {
            font-size: 26px;
            font-weight: bold;
            color: #4f46e5;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .nav-links a {
            color: #555;
            text-decoration: none;
            margin-left: 25px;
            font-weight: 500;
            transition: color 0.3s;
            padding: 8px 15px;
            border-radius: 8px;
        }
        
        .nav-links a:hover {
            color: #4f46e5;
            background: #f0f2ff;
        }
        
        .nav-links a.active {
            background: #4f46e5;
            color: white;
        }
        
        /* Estado del plan actual */
        .current-plan-box {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-left: 5px solid #4f46e5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .current-plan-info h2 {
            color: #4f46e5;
            margin-bottom: 10px;
        }
        
        .plan-stats {
            display: flex;
            gap: 30px;
            margin-top: 15px;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 10px;
            min-width: 120px;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #4f46e5;
        }
        
        .stat-label {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        /* Comparaci√≥n de planes */
        .plans-section {
            margin-bottom: 50px;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 40px;
            color: #333;
        }
        
        .section-title h1 {
            font-size: 32px;
            margin-bottom: 10px;
            color: #4f46e5;
        }
        
        .section-title p {
            color: #666;
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* Grid de planes */
        .plans-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .plan-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
            border: 2px solid #e0e0e0;
        }
        
        .plan-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.12);
        }
        
        .plan-card.popular {
            border-color: #4f46e5;
            transform: scale(1.02);
        }
        
        .plan-card.popular::before {
            content: "M√°s Elegido";
            position: absolute;
            top: 15px;
            right: 15px;
            background: #4f46e5;
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 2;
        }
        
        .plan-header {
            padding: 30px 25px 25px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .plan-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }
        
        .plan-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .plan-price {
            font-size: 36px;
            font-weight: bold;
            margin: 15px 0;
        }
        
        .plan-price span {
            font-size: 16px;
            color: #666;
            font-weight: normal;
        }
        
        .plan-period {
            color: #666;
            font-size: 14px;
        }
        
        .plan-features {
            padding: 25px;
        }
        
        .plan-features ul {
            list-style: none;
            padding: 0;
        }
        
        .plan-features li {
            padding: 12px 0;
            border-bottom: 1px dashed #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .plan-features li:last-child {
            border-bottom: none;
        }
        
        .feature-check {
            color: #10b981;
            font-size: 18px;
        }
        
        .plan-actions {
            padding: 0 25px 30px;
            text-align: center;
        }
        
        .upgrade-btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .upgrade-btn.primary {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
        }
        
        .upgrade-btn.secondary {
            background: #f1f5f9;
            color: #475569;
            border: 2px solid #e2e8f0;
        }
        
        .upgrade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(79, 70, 229, 0.3);
        }
        
        .current-btn {
            background: #e0e0e0 !important;
            color: #666 !important;
            cursor: default !important;
        }
        
        .current-btn:hover {
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* Tabla comparativa */
        .comparison-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin: 50px 0;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: #f8f9ff;
            padding: 20px;
            text-align: center;
            font-weight: bold;
            color: #4f46e5;
            border-bottom: 2px solid #e0e0e0;
        }
        
        td {
            padding: 18px 20px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
        }
        
        tr:hover {
            background: #f9f9ff;
        }
        
        .feature-cell {
            text-align: left;
            font-weight: 500;
            background: #fafafa;
        }
        
        .check-cell {
            color: #10b981;
            font-size: 20px;
            font-weight: bold;
        }
        
        .cross-cell {
            color: #ef4444;
            font-size: 20px;
        }
        
        /* Pie de p√°gina */
        footer {
            text-align: center;
            margin-top: 60px;
            padding: 30px 20px;
            color: #666;
            border-top: 1px solid #eee;
            background: white;
            border-radius: 20px 20px 0 0;
        }
        
        .faq-section {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin: 40px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .faq-item {
            margin-bottom: 25px;
            border-bottom: 1px solid #eee;
            padding-bottom: 25px;
        }
        
        .faq-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .faq-question {
            font-weight: bold;
            color: #333;
            font-size: 18px;
            margin-bottom: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .faq-answer {
            color: #666;
            line-height: 1.7;
            display: none;
        }
        
        .faq-answer.show {
            display: block;
        }
        
        /* Mensajes */
        .message {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }
        
        .success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            
            .nav-links a {
                margin: 0;
            }
            
            .current-plan-box {
                flex-direction: column;
                text-align: center;
            }
            
            .plan-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .plans-grid {
                grid-template-columns: 1fr;
            }
            
            .plan-card.popular {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <span>üè†</span>
                RentHub 2030
            </div>
            <nav class="nav-links">
                <a href="index.html">Inicio</a>
                <a href="dashboard.html">Panel de Control</a>
                <a href="publish.html">Publicar Anuncio</a>
                <a href="my-ads.html">Mis Anuncios</a>
                <a href="profile.html">Mi Cuenta</a>
                <a href="upgrade-plans.html" class="active">Mejorar Plan</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <!-- Estado del plan actual -->
        <div class="current-plan-box">
            <div class="current-plan-info">
                <h2 id="currentPlanDisplay">Tu Plan Actual</h2>
                <p id="planDescription">Cargando informaci√≥n de tu plan...</p>
                <div class="plan-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="adsUsedStat">0</div>
                        <div class="stat-label">Anuncios publicados</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="adsLimitStat">0</div>
                        <div class="stat-label">L√≠mite permitido</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="adsRemainingStat">0</div>
                        <div class="stat-label">Disponibles</div>
                    </div>
                </div>
            </div>
            <div>
                <button class="upgrade-btn secondary" onclick="window.location.href='publish.html'">
                    ‚Üê Volver a Publicar
                </button>
            </div>
        </div>

        <!-- Mensajes de √©xito -->
        <div id="successMessage" class="message success" style="display: none;">
            ¬°Mejora exitosa! Actualizando informaci√≥n de tu cuenta...
        </div>

        <!-- Comparaci√≥n de planes -->
        <div class="plans-section">
            <div class="section-title">
                <h1>üìä Elige el Plan Perfecto para Ti</h1>
                <p>Mejora tu plan para obtener m√°s caracter√≠sticas y publicar anuncios ilimitados</p>
            </div>

            <!-- Grid de planes -->
            <div class="plans-grid" id="plansContainer">
                <!-- Se llenar√° con JavaScript -->
            </div>
        </div>

        <!-- Tabla comparativa detallada -->
        <div class="comparison-table">
            <table>
                <thead>
                    <tr>
                        <th class="feature-cell">Caracter√≠stica</th>
                        <th>Gratis</th>
                        <th>Bronce</th>
                        <th>Plata</th>
                        <th>Oro</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="feature-cell">N√∫mero de Anuncios</td>
                        <td>1</td>
                        <td>5</td>
                        <td>20</td>
                        <td>Ilimitados</td>
                    </tr>
                    <tr>
                        <td class="feature-cell">Destacar Anuncio</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="check-cell">‚úì</td>
                        <td class="check-cell">‚úì</td>
                    </tr>
                    <tr>
                        <td class="feature-cell">Prioridad en B√∫squedas</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="check-cell">‚úì</td>
                        <td class="check-cell">‚úì</td>
                        <td class="check-cell">‚úì</td>
                    </tr>
                    <tr>
                        <td class="feature-cell">Reportes de Vistas</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="check-cell">‚úì</td>
                        <td class="check-cell">‚úì</td>
                    </tr>
                    <tr>
                        <td class="feature-cell">Soporte Inmediato</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="check-cell">‚úì</td>
                        <td class="check-cell">‚úì</td>
                    </tr>
                    <tr>
                        <td class="feature-cell">An√°lisis Avanzados</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="cross-cell">‚úó</td>
                        <td class="check-cell">‚úì</td>
                    </tr>
                    <tr>
                        <td class="feature-cell">Precio Mensual</td>
                        <td>Gratis</td>
                        <td>‚Ç¨5</td>
                        <td>‚Ç¨15</td>
                        <td>‚Ç¨30</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Preguntas Frecuentes -->
        <div class="faq-section">
            <h2 style="color: #4f46e5; margin-bottom: 30px; text-align: center;">‚ùì Preguntas Frecuentes</h2>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>¬øC√≥mo se renueva la suscripci√≥n?</span>
                    <span>‚ñº</span>
                </div>
                <div class="faq-answer">
                    La suscripci√≥n se renueva autom√°ticamente el mismo d√≠a de cada mes. Puedes cancelar la renovaci√≥n autom√°tica en cualquier momento desde tu cuenta.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>¬øPuedo mejorar a mitad de mes?</span>
                    <span>‚ñº</span>
                </div>
                <div class="faq-answer">
                    S√≠, puedes mejorar en cualquier momento. Se calcular√° el precio proporcional para los d√≠as restantes de tu mes actual.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>¬øQu√© pasa con mis anuncios actuales al mejorar?</span>
                    <span>‚ñº</span>
                </div>
                <div class="faq-answer">
                    Todos tus anuncios actuales permanecen como est√°n. Despu√©s de mejorar, obtendr√°s el nuevo l√≠mite de anuncios m√°s las nuevas caracter√≠sticas.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>¬øPuedo volver al plan gratuito?</span>
                    <span>‚ñº</span>
                </div>
                <div class="faq-answer">
                    S√≠, puedes volver al plan gratuito al final de tu per√≠odo de suscripci√≥n actual. No perder√°s tus anuncios, pero se aplicar√°n las limitaciones del nuevo plan.
                </div>
            </div>
        </div>
    </div>

    <!-- Pie de p√°gina -->
    <footer>
        <p>¬© 2023 RentHub 2030. Todos los derechos reservados.</p>
        <p style="font-size: 14px; margin-top: 10px; color: #888;">Cont√°ctanos: support@renthub.com | Tel√©fono: 900 123 456</p>
    </footer>

    <!-- Sistema de suscripciones -->
    <script src="js/subscriptions.js"></script>
    
    <!-- C√≥digo espec√≠fico de la p√°gina de mejora -->
    <script>
        // Inicializar p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ ¬°P√°gina de Mejora lista!');
            updateCurrentPlanDisplay();
            renderPlans();
        });
        
        // Actualizar visualizaci√≥n del plan actual
        function updateCurrentPlanDisplay() {
            try {
                const planInfo = getCurrentPlanInfo();
                
                // Actualizar elementos
                document.getElementById('currentPlanDisplay').textContent = `Tu Plan Actual: ${planInfo.name}`;
                document.getElementById('planDescription').textContent = 
                    `Por ${planInfo.price === 0 ? 'gratis' : `‚Ç¨${planInfo.price}/mes`} - ${planInfo.adsLimit === 100 ? 'anuncios ilimitados' : `l√≠mite de ${planInfo.adsLimit} anuncios`}`;
                
                document.getElementById('adsUsedStat').textContent = planInfo.adsUsed;
                document.getElementById('adsLimitStat').textContent = planInfo.adsLimit === 100 ? '‚àû' : planInfo.adsLimit;
                document.getElementById('adsRemainingStat').textContent = planInfo.adsRemaining;
                
            } catch (error) {
                console.error('Error actualizando visualizaci√≥n del plan:', error);
            }
        }
        
        // Mostrar planes disponibles
        function renderPlans() {
            const plansContainer = document.getElementById('plansContainer');
            if (!plansContainer) return;
            
            const plans = {
                free: { name: "Gratis", price: 0, icon: "üÜì", color: "#6c757d", popular: false },
                bronze: { name: "Bronce", price: 5, icon: "ü•â", color: "#cd7f32", popular: false },
                silver: { name: "Plata", price: 15, icon: "ü•à", color: "#c0c0c0", popular: true },
                gold: { name: "Oro", price: 30, icon: "ü•á", color: "#ffd700", popular: false }
            };
            
            const currentPlan = getCurrentPlanInfo();
            
            let plansHTML = '';
            
            Object.entries(plans).forEach(([key, plan]) => {
                const isCurrentPlan = currentPlan.name === plan.name;
                const isPopular = plan.popular;
                
                const features = {
                    free: ["1 anuncio solamente", "Soporte por email", "Apariencia est√°ndar"],
                    bronze: ["Hasta 5 anuncios", "Prioridad en b√∫squedas", "Soporte m√°s r√°pido", "Extensi√≥n de anuncio"],
                    silver: ["Hasta 20 anuncios", "Destacar anuncio", "Soporte en 24 horas", "Reportes b√°sicos", "Prioridad m√°xima"],
                    gold: ["Anuncios ilimitados", "Destacado premium", "Soporte telef√≥nico", "An√°lisis avanzados", "Caracter√≠sticas exclusivas"]
                };
                
                plansHTML += `
                    <div class="plan-card ${isPopular ? 'popular' : ''} ${isCurrentPlan ? 'current-plan' : ''}">
                        <div class="plan-header" style="background: ${plan.color}10; border-bottom-color: ${plan.color}30;">
                            <div class="plan-icon">${plan.icon}</div>
                            <h3 class="plan-name" style="color: ${plan.color};">${plan.name}</h3>
                            <div class="plan-price" style="color: ${plan.color};">
                                ${plan.price === 0 ? 'Gratis' : `‚Ç¨${plan.price}`}
                                ${plan.price > 0 ? '<span>/mes</span>' : ''}
                            </div>
                            <div class="plan-period">${plan.price === 0 ? 'Siempre gratis' : 'Factura mensual'}</div>
                        </div>
                        
                        <div class="plan-features">
                            <ul>
                                ${features[key].map(feature => `
                                    <li><span class="feature-check">‚úì</span> ${feature}</li>
                                `).join('')}
                            </ul>
                        </div>
                        
                        <div class="plan-actions">
                            <button class="upgrade-btn ${isCurrentPlan ? 'current-btn' : 'primary'}" 
                                    onclick="handleUpgrade('${key}')"
                                    ${isCurrentPlan ? 'disabled' : ''}
                                    style="${!isCurrentPlan ? `background: linear-gradient(135deg, ${plan.color}, ${plan.color}aa);` : ''}">
                                ${isCurrentPlan ? '‚úÖ Tu Plan Actual' : `üîº Mejorar a ${plan.name}`}
                            </button>
                        </div>
                    </div>
                `;
            });
            
            plansContainer.innerHTML = plansHTML;
        }
        
        // Procesar solicitud de mejora
        function handleUpgrade(planKey) {
            const planInfo = getCurrentPlanInfo();
            
            if (planInfo.name === planKey) {
                alert('¬°Este ya es tu plan actual!');
                return;
            }
            
            const planNames = {
                free: "Gratis",
                bronze: "Bronce",
                silver: "Plata",
                gold: "Oro"
            };
            
            const confirmUpgrade = confirm(
                `¬øEst√°s seguro de mejorar tu suscripci√≥n?\n\n` +
                `De: ${planInfo.name}\n` +
                `A: ${planNames[planKey]}\n\n` +
                `El cambio se aplicar√° inmediatamente.`
            );
            
            if (confirmUpgrade) {
                // Llamar a funci√≥n de mejora del sistema de suscripciones
                const success = upgradeUserPlan(planKey);
                
                if (success) {
                    // Mostrar mensaje de √©xito
                    document.getElementById('successMessage').style.display = 'block';
                    
                    // Actualizar visualizaci√≥n despu√©s de 2 segundos
                    setTimeout(() => {
                        updateCurrentPlanDisplay();
                        renderPlans();
                        document.getElementById('successMessage').style.display = 'none';
                    }, 2000);
                    
                    // Redirigir al panel de control despu√©s de 3 segundos
                    setTimeout(() => {
                        if (confirm('¬°Mejora exitosa! ¬øQuieres ir al Panel de Control?')) {
                            window.location.href = 'dashboard.html';
                        }
                    }, 3000);
                }
            }
        }
        
        // Alternar visualizaci√≥n de preguntas frecuentes
        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            const icon = element.querySelector('span:last-child');
            
            if (answer.classList.contains('show')) {
                answer.classList.remove('show');
                icon.textContent = '‚ñº';
            } else {
                answer.classList.add('show');
                icon.textContent = '‚ñ≤';
            }
        }
        
        // Funci√≥n de acceso directo para mejoras
        window.upgradeToPlan = function(planKey) {
            handleUpgrade(planKey);
        };
    </script>
</body>
</html>
